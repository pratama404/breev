@startuml Use Case Diagram
!theme plain

left to right direction

actor "Building Occupant" as User
actor "Facility Manager" as Admin
actor "Data Scientist" as Researcher
actor "System Timer" as Timer

rectangle "AQI Monitoring System" {
  
  package "Public Features" {
    usecase "Scan QR Code" as UC1
    usecase "View Real-time AQI" as UC2
    usecase "View Historical Trends" as UC3
    usecase "Get Health Recommendations" as UC4
    usecase "View Predictions" as UC5
  }
  
  package "Admin Features" {
    usecase "Login to Admin Panel" as UC6
    usecase "Add New Sensor" as UC7
    usecase "Remove Sensor" as UC8
    usecase "Generate QR Code" as UC9
    usecase "View All Devices" as UC10
    usecase "Access Grafana Dashboard" as UC11
  }
  
  package "System Features" {
    usecase "Collect Sensor Data" as UC12
    usecase "Process MQTT Messages" as UC13
    usecase "Store Data in Database" as UC14
    usecase "Generate ML Predictions" as UC15
    usecase "Send Alerts" as UC16
  }
  
  package "Research Features" {
    usecase "Export Historical Data" as UC17
    usecase "Analyze Patterns" as UC18
    usecase "Validate Model Accuracy" as UC19
  }
}

' User relationships
User --> UC1
User --> UC2
User --> UC3
User --> UC4
User --> UC5

' Admin relationships
Admin --> UC6
Admin --> UC7
Admin --> UC8
Admin --> UC9
Admin --> UC10
Admin --> UC11

' System relationships
Timer --> UC12
Timer --> UC13
Timer --> UC14
Timer --> UC15
Timer --> UC16

' Researcher relationships
Researcher --> UC17
Researcher --> UC18
Researcher --> UC19

' Include relationships
UC1 ..> UC2 : <<include>>
UC2 ..> UC3 : <<include>>
UC2 ..> UC4 : <<include>>
UC2 ..> UC5 : <<include>>

UC7 ..> UC9 : <<include>>
UC12 ..> UC13 : <<include>>
UC13 ..> UC14 : <<include>>
UC14 ..> UC15 : <<include>>

@enduml